<%# locals: (block: nil) %>

<section class="<%= "modal modal--scroll bg-snow min-w-[50%]" if block.nil? %>" data-behavior="modal" role="dialog" id="insert_hcb_code_modal" data-controller="announcement-modal" data-announcement-modal-tiptap-outlet="#announcement-form" <%= "data-announcement-modal-block-id-value=#{block.id}" if block.present? %>>
  <%= modal_header "#{block.present? ? "Edit this" : "Insert a"} transaction" %>
  <div class="flex flex-col gap-4">
    <div class="error-card mb-0 hidden">
      <p data-announcement-modal-target="errors"></p>
    </div>

    <div>
      <%= label_tag "link", "Transaction link" %>
      <%= url_field_tag "link", block.present? ? "#{request.env['rack.url_scheme'] + '://' + request.host_with_port}/hcb/#{block.parameters["hcb_code"]}" : nil, data: { "announcement-modal-target": "input" } %>
    </div>

    <button type="button" class="btn w-fit" data-action="announcement-modal#hcbCode"><%= block.present? ? "Edit" : "Add" %></button>
  </div>
</section>
